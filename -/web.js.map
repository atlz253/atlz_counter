{"version":3,"sources":["-","../../../mam.ts","../../../mol/dom/context/context.ts","../../../mol/dom/context/context.web.ts","../../../mol/dom/render/children/children.ts","../../../atlz/lom/view/view.ts","../../../atlz/counter/storage/storage.ts","../../../atlz/lom/button/button.ts","../../../atlz/lom/input/input.ts","../../../mol/style/attach/attach.ts","../../../atlz/theme/theme.ts","../../../atlz/counter/counter.ts","../../../atlz/counter/-css/counter.css.ts"],"names":[],"mappings":"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","sourcesContent":[null,"Error.stackTraceLimit = 50;\n\ndeclare let _$_: { new(): {} } & typeof globalThis\ndeclare class $ extends _$_ {}\n\nnamespace $ {\n\texport type $ = typeof $$\n\texport declare class $$ extends $ {}\n\tnamespace $$ {\n\t\texport type $$ = $\n\t}\n}\n\nmodule.exports = $\n","namespace $ {\n\t\n\texport var $mol_dom_context : typeof globalThis\n\t\n}\n","namespace $ {\n\t\n\t$.$mol_dom_context = self as any\n\t\n}\n","namespace $ {\n\n\texport function $mol_dom_render_children (\n\t\tel : Element | DocumentFragment ,\n\t\tchildNodes : NodeList | Array< Node | string | null >\n\t) {\n\t\tconst node_set = new Set< Node | string | null >( childNodes )\n\t\t\n\t\tlet nextNode : Node | null = el.firstChild\n\t\tfor( let view of childNodes ) {\n\n\t\t\tif( view == null ) continue\n\n\t\t\tif( view instanceof $mol_dom_context.Node ) {\n\t\t\t\t\n\t\t\t\twhile( true ) {\n\t\t\t\t\tif( !nextNode ) {\n\t\t\t\t\t\tel.appendChild( view )\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t\tif( nextNode == view ) {\n\t\t\t\t\t\tnextNode = nextNode.nextSibling\n\t\t\t\t\t\tbreak\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif( node_set.has( nextNode ) ) {\n\t\t\t\t\t\t\tel.insertBefore( view , nextNode )\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst nn = nextNode.nextSibling\n\t\t\t\t\t\t\tel.removeChild( nextNode )\n\t\t\t\t\t\t\tnextNode = nn\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\tif( nextNode && nextNode.nodeName === '#text' ) {\n\t\t\t\t\tconst str = String( view )\n\t\t\t\t\tif( nextNode.nodeValue !== str ) nextNode.nodeValue = str\n\t\t\t\t\tnextNode = nextNode.nextSibling\n\t\t\t\t} else {\n\t\t\t\t\tconst textNode = $mol_dom_context.document.createTextNode( String( view ) )\n\t\t\t\t\tel.insertBefore( textNode , nextNode )\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\twhile( nextNode ) {\n\t\t\tconst currNode = nextNode\n\t\t\tnextNode = currNode.nextSibling\n\t\t\tel.removeChild( currNode )\n\t\t}\n\t}\n\n}\n","class $atlz_lom_view {\n\t// Тут и ниже, такие поля используются для кеширования.\n\t// Удалятся при добавлении реактивности, в следующей главе\n\t_dom_node = null as unknown as Element\n\t// Создание DOM-ноды и регистрация событий на ней\n\tdom_node() {\n\t\tif (this._dom_node) return this._dom_node\n\n\t\tconst node = document.createElement(this.dom_name())\n\n\t\tfor (const [name, fn] of Object.entries(this.event())) {\n\t\t\tnode.addEventListener(name, fn)\n\t\t}\n\n\t\t// Атрибут с именем класса, для матчинга из css\n\t\tnode.setAttribute('view', this.constructor.name)\n\n\t\treturn (this._dom_node = node)\n\t}\n\n\t// Актуализация атрибутов и полей\n\tdom_node_actual() {\n\t\tconst node = this.dom_node()\n\n\t\tfor (const [name, val] of Object.entries(this.attr())) {\n\t\t\tnode.setAttribute(name, String(val))\n\t\t}\n\n\t\tfor (const [name, val] of Object.entries(this.field())) {\n\t\t\t;(node as any)[name] = val\n\t\t}\n\n\t\treturn node\n\t}\n\n\t// Подготовка и рендеринг дочерних компонентов\n\tdom_tree() {\n\t\tconst node = this.dom_node_actual()\n\n\t\tconst node_list = this.sub().map(node => {\n\t\t\tif (node === null) return null\n\t\t\treturn node instanceof $atlz_lom_view ? node.dom_tree() : String(node)\n\t\t})\n\n\t\t// Воспользуемся рендером из $mol\n\t\t$.$mol_dom_render_children(node, node_list)\n\n\t\treturn node\n\t}\n\n\t// Методы ниже будут переопредялятся в компонентах-наследниках\n\n\t// Имя DOM-элемента\n\tdom_name() {\n\t\treturn 'div'\n\t}\n\t// Объект с атрибутами\n\tattr(): { [key: string]: string | number | boolean | null } {\n\t\treturn {}\n\t}\n\t// Объект с событиями\n\tevent(): { [key: string]: (e: Event) => any } {\n\t\treturn {}\n\t}\n\t// Объекст с полями\n\tfield(): { [key: string]: any } {\n\t\treturn {}\n\t}\n\t// Дочерние компоненты\n\tsub(): Array<$atlz_lom_view | Node | string | number | boolean> {\n\t\treturn []\n\t}\n}\n","class $atlz_counter_storage {\n\tstatic value<Value>( key: string, next?: Value ) {\n\t\tif ( next === undefined ) return JSON.parse( localStorage.getItem( key ) ?? 'null' )\n\t\tif ( next === null ) localStorage.removeItem( key )\n\t\telse localStorage.setItem( key, JSON.stringify( next ) )\n\t\treturn next\n\t}\n}\n","class $atlz_lom_button extends $atlz_lom_view {\n\tdom_name() {\n\t\treturn 'button'\n\t}\n\n\ttitle() {\n\t\treturn ''\n\t}\n\n\tclick(e: Event) {}\n\n\tsub() {\n\t\treturn [this.title()]\n\t}\n\n\tevent() {\n\t\treturn {\n\t\t\tclick: (e: Event) => this.click(e),\n\t\t}\n\t}\n}\n\nclass $atlz_lom_button_minor extends $atlz_lom_button {\n\tattr() {\n\t\treturn {\n\t\t\tatlz_counter_button_minor: true,\n\t\t}\n\t}\n}\n","class $atlz_lom_input extends $atlz_lom_view {\n\tdom_name() {\n\t\treturn 'input'\n\t}\n\n\ttype() {\n\t\treturn 'text'\n\t}\n\n\t_value = ''\n\tvalue(next = this._value) {\n\t\treturn (this._value = next)\n\t}\n\n\tchange(e: Event) {\n\t\tthis.value((e.target as HTMLInputElement).value)\n\t}\n\n\tfield() {\n\t\treturn {\n\t\t\tvalue: this.value(),\n\t\t}\n\t}\n\n\tattr() {\n\t\treturn {\n\t\t\ttype: this.type(),\n\t\t}\n\t}\n\n\tevent() {\n\t\treturn {\n\t\t\tinput: (e: Event) => this.change(e),\n\t\t}\n\t}\n}\n","namespace $ {\n\n\texport function $mol_style_attach(\n\t\tid : string ,\n\t\ttext : string ,\n\t) {\n\n\t\tconst doc = $mol_dom_context.document\n\t\tif( !doc ) return null\n\t\t\n\t\tconst elid = `$mol_style_attach:${id}`\n\t\t\n\t\tlet el = doc.getElementById( elid ) as HTMLStyleElement\n\t\tif( !el ) {\n\t\t\tel = doc.createElement('style')\n\t\t\tel.id = elid\n\t\t\tdoc.head.appendChild( el )\n\t\t}\n\t\tif( el.innerHTML != text ) el.innerHTML = text\n\t\t\n\t\treturn el\n\t}\n\n}\n","setInterval(() => {\n\tdocument?.documentElement.setAttribute('atlz_theme', new Date().getSeconds() < 30 ? 'light' : 'dark')\n}, 1_000)\n","class $atlz_counter extends $atlz_lom_view {\n\tcount(next?: number) {\n\t\treturn $atlz_counter_storage.value('count', next) ?? 0\n\t}\n\n\tcount_str(next?: string) {\n\t\treturn this.count(next?.valueOf && Number(next)).toString()\n\t}\n\n\tinc() {\n\t\tthis.count(this.count() + 1)\n\t}\n\n\tdec() {\n\t\tthis.count(this.count() - 1)\n\t}\n\n\t// Создаем инстанс Button\n\t// Переопределяем title\n\t// click биндим на this.inc\n\t_Inc = null as unknown as $atlz_lom_view\n\tInc() {\n\t\tif (this._Inc) return this._Inc\n\n\t\tconst obj = new $atlz_lom_button()\n\t\tobj.title = () => '+'\n\t\tobj.click = () => this.inc()\n\n\t\treturn (this._Inc = obj)\n\t}\n\n\t_Dec = null as unknown as $atlz_lom_view\n\tDec() {\n\t\tif (this._Dec) return this._Dec\n\n\t\tconst obj = new $atlz_lom_button()\n\t\tobj.title = () => '-'\n\t\tobj.click = () => this.dec()\n\n\t\treturn (this._Dec = obj)\n\t}\n\n\t_Count = null as unknown as $atlz_lom_view\n\tCount() {\n\t\tif (this._Count) return this._Count\n\n\t\tconst obj = new $atlz_lom_input()\n\t\tobj.value = (next?: string) => this.count_str(next)\n\n\t\treturn (this._Count = obj)\n\t}\n\n\tsub() {\n\t\treturn [this.Dec(), this.Count(), this.Inc()]\n\t}\n\n\tstatic mount() {\n\t\tif (typeof document === 'undefined') return // Костыль\n\n\t\tconst node = document.querySelector('#root')\n\t\tconst obj = new $atlz_counter()\n\n\t\tnode?.replaceWith(obj.dom_tree())\n\n\t\t// Реактивность добавится в следующей главе, сейчас воспользуемся костылем\n\t\tsetInterval(() => obj.dom_tree(), 100)\n\t}\n}\n\n// Вызываем для монтирования приложения в DOM-дерево\n$atlz_counter.mount()\n","namespace $ { $mol_style_attach( \"atlz/counter/counter.css\",\n \"[atlz_theme=\\\"light\\\"] {\\n\\tbackground-color: white;\\n}\\n\\n[atlz_theme=\\\"dark\\\"] {\\n\\tbackground-color: black;\\n}\\n\"\n) }"]}